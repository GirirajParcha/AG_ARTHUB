<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
        <title>Order Now! -Shop</title>
        <!-- google fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet">


        <!-- font Awesome -->
        <script src="https://kit.fontawesome.com/b7fd829945.js" crossorigin="anonymous"></script>


        <!--bootstrap stylesheet-->
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        
        <!--my stylesheet-->
        {% load static %}
        <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
</head>

<body>
    
  <!-- navigation bar -->
  <nav class="navbar navbar-expand-lg navbar-dark nav-bar">
    <div class="container-fluid">
      <video class="logo" width="25%" autoplay muted>
        <source src="{% static 'Logo-video.mp4' %}" type="video/mp4">
      </video>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item home">
            <a class="nav-link " aria-current="page" href="/">Home</a>
          </li>
          <li class="nav-item blog">
            <a class="nav-link " href="/blogs">Blogs</a>
          </li>
          <li class="nav-item shop">
            <a class="nav-link active" href="/shop">Shop</a>
          </li>
          <li class="nav-item project">
            <a class="nav-link" href="/learn">SBS</a>
          </li>
          <li class="nav-item gallery">
            <a class="nav-link " href="/gallery">Gallery</a>
          </li>
          <li class="nav-item Contact">
            <a class="nav-link" href="HomePage.html #ContactMe">Contact</a>
          </li>
          <li class="nav-item insta">
            <a class="nav-link" href="https://www.instagram.com/mr.singh_23/">
              <i class="fab fa-instagram"></i>
            </a>
          </li>
          <li class="nav-item youtube">
            <a class="nav-link" href="https://www.youtube.com/channel/UC20IYjJgesMSqm8q2ct8dXg">
              <i class="fab fa-youtube"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!--Body-->
  

  <div class="container">
    <center> <h1 class="shop-heading">Shop</h1>
      <button type="button" id = "popcart"class="btn btn-secondary mx-2" data-container="body" data-toggle="popover" data-placement="bottom" data-html= "true" data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus.">
       Cart (<span id="cart">0</span>)
      </button>
    </center>
    <div class="col">
        <h2> Step 1 - My Awesome Cart Express Checkout - Review Your Cart items </h2>
        <div>
            <ul class="list-group" id="items">
                
            </ul>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb mt-3 list-group">
                  <li class="breadcrumb-item active list-group-item " aria-current="page">Your Cart Total Is <b>Rs.<span id="totalPrice"></b>  </span>Enter your details below & place your order. Thanks for using My Awesome Cart!</li>
              </ol>
          </nav>
        </div>
    </div>
    <!-- step 2 -->
    <div class="col my-4">
        <h2> Step 2 - Enter Address & Other Details</h2>
        <form method="post" action="/orders"> {% csrf_token %}
          <input type="hidden" name="amount" id="amount">
            <input type="hidden" name="itemsJson" id="itemsJson">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="inputname">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Name">
                </div>
                <div class="form-group col-md-6">
                    <label for="inputEmail4">Email</label>
                    <input type="Email" class="form-control" id="email" name="email" placeholder="Email">
                </div>
            </div>
            <div class="form-group">
                <label for="inputAddress">Address</label>
                <input type="text" class="form-control" id="address1" name="address1" placeholder="1234 Main St">
            </div>
            <div class="form-group">
                <label for="inputAddress2">Address line 2</label>
                <input type="text" class="form-control" id="address2" name="address2" placeholder="Apartment, studio, or floor">
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="inputCity">City</label>
                    <input type="text" class="form-control" id="city" name="city">
                </div>
                <div class="form-group col-md-4">
                    <label for="inputState">State</label>
                    <input type="text" class="form-control" id="state" name="state"  placeholder="Enter State">
                </div>
                <div class="form-group col-md-2">
                    <label for="inputZip">Zip</label>
                    <input type="Number" class="form-control" id="zip_code" name="zip_code">
                </div>
            </div>
            <div class="form-group">
                <label for="inputZip">Phone Number</label>
                <input type="Number" class="form-control" id="phone" name="phone">
            </div>
            <button type="submit" class="btn btn-primary">Place Order</button>
        </form>
    </div>
</div>


    <!-- footer section -->

    <footer id="footer">
        <a href="https://twitter.com/SokhiAbhinavS23?t=gxnaYTug79lDYXTgr4Dpjw&s=09"><i class="fab fa-twitter footer-icon"></i></a>
        <a href=""><i class="fab fa-facebook-f footer-icon"></i></a>
        <a href="https://www.instagram.com/mr.singh_23/"><i class="fab fa-instagram footer-icon"></i></a>
        <a href="https://www.youtube.com/channel/UC20IYjJgesMSqm8q2ct8dXg"><i class="fab fa-youtube footer-icon"></i></a>
        <p class="footer-copyright">Â© Copyright 2021 Abhinav Creates Art</p>
  
    </footer>

<!-- bootstrap javascript -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
  
  

<script>
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    //cart[idstr] = [qty, name];
    cart = JSON.parse(localStorage.getItem('cart'));
}
console.log(cart);
var sum = 0;
var totalPrice = 0;
if ($.isEmptyObject(cart)) {
    // If object is empty
    mystr = "<p>Your cart is empty, please add some items before checking out ! </p>"
    $('#items').append(mystr);
}

for (item in cart) {

    let name = cart[item][1];
    let qty = cart[item][0];
    let itemPrice = cart[item][2];
    sum = sum + qty;
    totalPrice = totalPrice + qty * itemPrice
    mystr = `        <li class="list-group-item d-flex justify-content-between align-items-center">
                   ${name}
                    <span class="badge bg-primary badge-pill">${qty}</span>
                </li>`
    $('#items').append(mystr);
}
document.getElementById('cart').innerHTML = sum;
document.getElementById('totalPrice').innerHTML = totalPrice;
$('#itemsJson').val(JSON.stringify(cart));
{% if thank %}
alert("Thanks for ordering with us. Your order id is 12. Use it to track your order using our order tracker")
localStorage.clear();
document.location="/shop";
{% endif %}
$('#amount').val($('#totalPrice').html())
</script>
</body>
</html>